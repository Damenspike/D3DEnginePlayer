<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" 
		href="../../../node_modules/material-icons/iconfont/material-icons.css">
	<link rel="stylesheet" type="text/css" 
		href="../../assets/style/main.css">
	<link rel="stylesheet" type="text/css" 
		href="../../assets/style/editor.css">
	<script type="text/javascript" 
		src="../../assets/scripts/theme.js"></script>
</head>
<body>
	<div class='topbar' id='topbar-view'>
		<div 
			class='tool-option no-select' 
			id='tool-select'
			onclick="_editor.setTool('select')"
		>
			<i class="material-icons">navigation</i>
		</div>
		<div 
			class='tool-option no-select' 
			id='tool-pan'
			onclick="_editor.setTool('pan')"
		>
			<i class="material-icons">camera_alt</i>
		</div>
		<div 
			class='tool-option no-select' 
			id='tool-transform'
			onclick="_editor.setTool('transform')"
		>
			<i class="material-icons">open_with</i>
		</div>
		<div 
			class='tool-option no-select' 
			id='tool-rotate'
			onclick="_editor.setTool('rotate')"
		>
			<i class="material-icons">rotate_right</i>
		</div>
		<div 
			class='tool-option no-select' 
			id='tool-scale'
			onclick="_editor.setTool('scale')"
		>
			<i class="material-icons">aspect_ratio</i>
		</div>
	</div>
	
	<div class="editor-main">
		<div class='inspector resizable no-select' id='insp-view'>
			<div class='inspector-cell' id='insp-cell-object'>
				<div class='insp-title'>
					Object
				</div>
				<div class="insp-body">
					<!-- inspector !-->
					
					<div class="field">
						<label>Name</label>
						<input
							id="insp-object-name"
							type="text"
							class="tf"
						/>
					</div>
					<div class="field vector-field">
						<div class="vector-input">
							<label>Position</label>
							<input
								id="insp-object-pos-x"
								type="number"
								class="tf"
							/>
							<input
								id="insp-object-pos-y"
								type="number"
								class="tf"
							/>
							<input
								id="insp-object-pos-z"
								type="number"
								class="tf"
							/>
						</div>
					</div>
					<div class="field vector-field">
						<div class="vector-input">
							<label>Rotation</label>
							<input
								id="insp-object-rot-x"
								type="number"
								class="tf"
							/>
							<input
								id="insp-object-rot-y"
								type="number"
								class="tf"
							/>
							<input
								id="insp-object-rot-z"
								type="number"
								class="tf"
							/>
						</div>
					</div>
					<div class="field vector-field">
						<div class="vector-input">
							<label>Scale</label>
							<input
								id="insp-object-scale-x"
								type="number"
								class="tf"
							/>
							<input
								id="insp-object-scale-y"
								type="number"
								class="tf"
							/>
							<input
								id="insp-object-scale-z"
								type="number"
								class="tf"
							/>
						</div>
					</div>
					<div class="field">
						<div class="vector-input vector-input--top">
							<div>
								<label for="insp-object-visible">
									Visible
								</label>
								<input
									id="insp-object-visible"
									type="checkbox"
									class="tf"
								/>
							</div>
							<div>
								<label for="insp-object-opacity">
									Opacity
								</label>
								<input
									id="insp-object-opacity"
									type="range"
									min="0"
									max="1"
									step="0.01"
									class="tf"
								/>
							</div>
							
						</div>
					</div>
				</div>
			</div>
			
			<div class='inspector-cell' id='insp-cell-project'>
				<div class='insp-title'>
					Project
				</div>
				<div class="insp-body">
					<div class="field">
						<label>Project name</label>
						<input
							id="insp-project-name"
							type="text"
							class="tf"
						/>
					</div>
					<div class="field">
						<label for="author">Author</label>
						<input
							id="insp-project-author"
							type="text"
							class="tf"
						/>
					</div>
					
					<div class="field">
						<label>Default dimensions</label>
						<input
							id="insp-project-dimensions-width"
							name="width"
							type="number"
							class="tf tf--num"
							value="760"
							placeholder="Width px"
						/>
						<input
							id="insp-project-dimensions-height"
							name="height"
							type="number"
							class="tf tf--num"
							value="480"
							placeholder="Height px"
						/>
					</div>
				</div>
			</div>
		</div>
	
		<div class="center-column">
			<div class='game resizable' id='game-container' tabindex='0'></div>
			<div class='assets resizable' id='assets-view'></div>
		</div>
	</div>
	
	<script type="module" src="../../engine/d3deditor.js"></script>
	<script>
		// Simple resizable behavior
		document.querySelectorAll('.resizable').forEach(el => {
			const handle = el.querySelector('::after'); // pseudo elements not directly selectable
		});

		let current, startX, startY, startWidth, startHeight;

		document.addEventListener('mousedown', e => {
			if (e.target.closest('.inspector.resizable') && e.offsetX > e.target.offsetWidth - 6) {
				current = e.target;
				startX = e.clientX;
				startWidth = current.offsetWidth;
				document.body.style.cursor = 'ew-resize';
			} else if (e.target.closest('.assets.resizable') && e.offsetY < 6) {
				current = e.target;
				startY = e.clientY;
				startHeight = current.offsetHeight;
				document.body.style.cursor = 'ns-resize';
			}
		});

		document.addEventListener('mousemove', e => {
			if (!current) return;
			if (current.classList.contains('inspector')) {
				const newWidth = startWidth + (e.clientX - startX);
				current.style.width = newWidth + 'px';
			} else if (current.classList.contains('assets')) {
				const newHeight = startHeight - (e.clientY - startY);
				current.style.height = newHeight + 'px';
			}
		});

		document.addEventListener('mouseup', () => {
			current = null;
			document.body.style.cursor = 'default';
		});
	</script>
</body>
</html>
<script>
	const $ = require('jquery');
	
	// restore state on load
	$('.inspector-cell').each(function() {
		const id = this.id || '';
		const saved = localStorage.getItem('insp-collapsed:' + id);
		if (saved === '1') $(this).addClass('collapsed');
	});
	
	// toggle on click
	$(document).on('click', '.insp-title', function() {
		const $cell = $(this).closest('.inspector-cell');
		const id = $cell.attr('id') || '';
		$cell.toggleClass('collapsed');
		localStorage.setItem('insp-collapsed:' + id, $cell.hasClass('collapsed') ? '1' : '0');
	});
	
	// keyboard support (Enter/Space)
	$(document).on('keydown', '.insp-title', function(e) {
		if (e.key === 'Enter' || e.key === ' ') {
			e.preventDefault();
			$(this).trigger('click');
		}
	});
</script>